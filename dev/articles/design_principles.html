<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="epiparameter">
<title>Design Principles for {epiparameter} • epiparameter</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Design Principles for {epiparameter}">
<meta property="og:description" content="epiparameter">
<meta property="og:image" content="https://epiverse-trace.github.io/epiparameter/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">epiparameter</a>
    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/epiparameter.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Intro</h6></li>
    <li><a class="dropdown-item" href="../articles/extract_convert.html">Parameter extraction and conversion in {epiparameter}</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Epiparameter Data</h6></li>
    <li><a class="dropdown-item" href="../articles/data_protocol.html">Data Collation and Synthesis Protocol</a></li>
    <li><a class="dropdown-item" href="../articles/database.html">Current database</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Handling data from other packages</h6></li>
    <li><a class="dropdown-item" href="../articles/data_from_epireview.html">Using {epireview} with {epiparameter}</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Auxiliary</h6></li>
    <li><a class="dropdown-item" href="../articles/extract-bias.html">{epiparameter} Extraction Bias Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/design_principles.html">Design Principles for {epiparameter}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/epiparameter/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">



<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Design Principles for {epiparameter}</h1>
                        <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/epiparameter/blob/HEAD/vignettes/design_principles.Rmd" class="external-link"><code>vignettes/design_principles.Rmd</code></a></small>
      <div class="d-none name"><code>design_principles.Rmd</code></div>
    </div>
        <p>This vignette outlines the design decisions that have been
taken during the development of the {epiparameter} R package, and
provides some of the reasoning, and possible pros and cons of each
decision.</p>
<p>This document is primarily intended to be read by those interested in
understanding the code within the package and for potential package
contributors.</p>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>The {epiparameter} R package is a library of epidemiological
parameters, and provides a class (i.e. data structure) and helper
functions for working with epidemiological parameters and distributions.
The <code>&lt;epidist&gt;</code> class is the main functional object for
working with epidemiological parameters and can hold information on
delay distributions (e.g. incubation period, serial interval,
onset-to-death distribution) and offspring distributions. The class has
a number of methods, including allowing the user to easily calculate the
PDF, CDF, and quantile, generate random numbers, calculate the
distribution mean, and plot the distribution. An
<code>&lt;epidist&gt;</code> object can be created with the constructor
function <code><a href="../reference/epidist.html">epidist()</a></code>, and if uncertain whether an object is
an <code>&lt;epidist&gt;</code>, it can be validated with
<code><a href="../reference/validate_epidist.html">validate_epidist()</a></code>.</p>
<p>The package also converts distribution parameters to summary
statistics, and vice versa. This is achieved either by conversion or
extraction and both of these methods and the functions used are
explained in the <a href="extract_convert.html">Parameter extraction and
conversion in {epiparameter} vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>The output of the <code><a href="../reference/epidist.html">epidist()</a></code> constructor function is an
<code>&lt;epidist&gt;</code> object. This is a list of nine elements,
where each element is either a single type
(e.g. <code>character</code>), a non-nested <code>list</code> or another
class. Classes as <code>&lt;epidist&gt;</code> elements are used when
there is existing well developed infrastructure for handling certain
data types. The <code>$prod_dist</code> element uses a distribution
class – if there is a parameterised distribution available – using
either the <code>&lt;distribution&gt;</code> class from {distributional}
or the <code>&lt;distcrete&gt;</code> class from {distcrete}. The
<code>$citation</code> is handled using the
<code>&lt;bibentry&gt;</code> class from the {utils} package (included
as part of the base R recommended packages).</p>
<p>Other functions return the simplest type possible, this may be an
atomic vector (including single element vectors), or un-nested
lists.</p>
</div>
<div class="section level2">
<h2 id="design-decisions">Design decisions<a class="anchor" aria-label="anchor" href="#design-decisions"></a>
</h2>
<ul>
<li><p>The conversion functions (<code>convert_*</code>) are S3 generic
functions with methods provided by {epiparameter} for
<code>character</code> and <code>&lt;epidist&gt;</code> input. This
follows the design pattern of other packages, such as <a href="https://dplyr.tidyverse.org/" class="external-link">{dplyr}</a>, which export their key
data transformation functions as S3 generics to allow other developers
to extend the conversions to other data objects.</p></li>
<li><p>The conversion functions are designed to have a single function
exported to the user for summary statistics to parameters, and another
function exported for parameters to summary statistics. These functions
use a <code><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch()</a></code> to dispatch to the internal conversion
functions. This provides a minimal number of conversion functions in the
package namespace compared to exporting a conversion function for every
distribution.</p></li>
<li><p>If there are a large number of entries returned when reading
epidemiological parameters from the library using the
<code><a href="../reference/epidist_db.html">epidist_db()</a></code> function, it can flood the console, due to the
default <code>list</code> printing in R. This is the reasoning for the
<code>&lt;multi_epidist&gt;</code> object which is a minimal class to
enable cleaner and more descriptive printing for a large list of
<code>&lt;epidist&gt;</code> objects.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>The aim is to restrict the number of dependencies to a minimal
required set for ease of maintenance. The current hard dependencies
are:</p>
<ul>
<li><a href="https://CRAN.R-project.org/package=checkmate" class="external-link">{checkmate}</a></li>
<li><a href="https://CRAN.R-project.org/package=distributional" class="external-link">{distributional}</a></li>
<li><a href="https://CRAN.R-project.org/package=distcrete" class="external-link">{distcrete}</a></li>
<li>{stats}</li>
<li>{utils}</li>
</ul>
<p>{stats} and {utils} are distributed with the R language so are viewed
as a lightweight dependencies, that should already be installed on a
user’s machine if they have R. {checkmate} is an input checking package
widely used across Epiverse-TRACE packages. {distributional} and
{distcrete} are used to import S3 classes for handling and working with
distributions. Both are required as only {distcrete} can handle
discretised distributions.</p>
<p><a href="https://CRAN.R-project.org/package=jsonlite" class="external-link">{jsonlite}</a>
is a suggested dependency because it is used to read the parameter
library which is stored as a JSON file. However, it is only read by an
internal function and instead the data is available to the user via
<code>sysdata.rda</code>, so {jsonlite} is not required as an imported
dependency.</p>
</div>
<div class="section level2">
<h2 id="contribute">Contribute<a class="anchor" aria-label="anchor" href="#contribute"></a>
</h2>
<p>In addition to the <a href="https://github.com/epiverse-trace/.github/blob/main/CONTRIBUTING.md" class="external-link">package
contributing guide</a>, please refer to the <a href="https://epiverse-trace.github.io/epiparameter/articles/data_protocol.html#contributing-to-the-package">{epiparameter}
specific contributing guidelines for adding epidemiological parameter to
the package library</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua W. Lambert, Adam Kucharski, Carmen Tamayo.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer>
</div>
  </body>
</html>
